# 📄 .github/workflows/nodejs.yml

name: Node.js CI

# 📌 Déclencheurs : quand ce workflow doit-il s'exécuter ?
on:
  push:
    branches: [main, develop, feature/*] # Sur push vers ces branches
  pull_request:
    branches: [main] # Sur toute PR vers main

# 📌 Définition du job à exécuter
jobs:
  build-and-test:
    runs-on: ubuntu-latest # Machine virtuelle fournie par GitHub

    steps:
      # 1️⃣ Récupérer le code source
      - name: 📥 Checkout du code
        uses: actions/checkout@v3

      # 2️⃣ Installer Node.js (version 20)
      - name: 📦 Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 20

      # 3️⃣ Installer les dépendances du projet
      - name: 📦 Install dependencies
        run: npm ci

      # 4️⃣ Exécuter les tests automatisés
      - name: 🚀 Run tests
        run: npm run test
# ✅ Résumé :
# - Ce workflow est lancé à chaque push ou pull request.
# - Il installe Node.js + dépendances + lance les tests.
# - Les résultats apparaissent dans l'onglet Actions du repo GitHub.
